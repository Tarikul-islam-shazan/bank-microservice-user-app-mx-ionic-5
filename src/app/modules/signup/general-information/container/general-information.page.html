<ion-header class="white-header ion-no-border">
  <ion-toolbar> </ion-toolbar>
</ion-header>
<ion-content>
  <div class="content-wrapper">
    <div class="step-counter" id="general-info-page-step-counter">
      <step-counter [step]="'Step 3 of 3'" [stepNo]="3"></step-counter>
    </div>
    <div class="header-title" id="general-info-page-step-header-title-text">
      {{ 'signup-module.general-info-page.page-title' | translate }}
    </div>
    <form [formGroup]="generalForm">
      <ion-list lines="none">
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.firstName.invalid && generalForm.controls.firstName.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="{{nameMaxLength}}"
            formControlName="firstName"
            class="white-input"
            id="general-info-page-first-name-input"
            type="text"
            placeholder="{{ 'signup-module.general-info-page.generalForm.first-name' | translate }}"
            [appMaskInput]="wordsInput"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.secondName.invalid && generalForm.controls.secondName.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="{{nameMaxLength}}"
            formControlName="secondName"
            id="general-info-page-second-name-input"
            class="white-input"
            type="text"
            placeholder="{{ 'signup-module.general-info-page.generalForm.second-name' | translate }}"
            [appMaskInput]="wordsInput"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.paternalLastName.invalid && generalForm.controls.paternalLastName.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="{{nameMaxLength}}"
            formControlName="paternalLastName"
            class="white-input"
            id="general-info-page-parental-last-name-input"
            type="text"
            placeholder="{{ 'signup-module.general-info-page.generalForm.paternal-last-name' | translate }}"
            [appMaskInput]="wordsInput"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.maternalLastName.invalid && generalForm.controls.maternalLastName.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="{{nameMaxLength}}"
            formControlName="maternalLastName"
            class="white-input"
            id="general-info-page-maternal-last-name-input"
            type="text"
            placeholder="{{ 'signup-module.general-info-page.generalForm.maternal-last-name' | translate }}"
            [appMaskInput]="wordsInput"
          ></ion-input>
        </ion-item>
        <ion-item
          class="date-input"
          [ngClass]="generalForm.controls.dateOfBirth.invalid && (generalForm.controls.dateOfBirth.touched || generalForm.controls.curp.touched || generalForm.controls.mobileNumber.touched) ? 'date-error-input' : ''"
        >
          <ion-label *ngIf="!generalForm.controls.dateOfBirth.value"
            >{{ 'signup-module.general-info-page.generalForm.date-of-birth' | translate }}</ion-label
          >
          <ion-datetime
            formControlName="dateOfBirth"
            displayFormat="{{ 'signup-module.general-info-page.generalForm.date-of-birth-display-format' | translate }}"
            pickerFormat="{{ 'signup-module.general-info-page.generalForm.date-of-birth-display-format' | translate }}"
            [max]="facade.maxDate"
            (ionChange)="validateCurp()"
            id="general-info-page-date-of-birth-input"
          ></ion-datetime>
          <ion-icon name="chevron-down"></ion-icon>
        </ion-item>
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.curp.invalid && generalForm.controls.curp.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="{{curpMaxLength}}"
            formControlName="curp"
            class="white-input"
            id="general-info-page-curp-input"
            type="text"
            placeholder="{{ 'signup-module.general-info-page.generalForm.curp' | translate }}"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-input
            [ngClass]="generalForm.controls.mobileNumber.invalid && generalForm.controls.mobileNumber.touched ? 'error-input' : 'white-input'"
            appInputMaxLength="10"
            formControlName="mobileNumber"
            class="white-input"
            id="general-info-page-mobile-number-input"
            type="tel"
            placeholder="{{ 'signup-module.general-info-page.generalForm.mobile-number' | translate }}"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-label class="ion-text-wrap question" id="general-info-permission-text"
            >{{ 'signup-module.general-info-page.permission-text' | translate }}</ion-label
          >
        </ion-item>
      </ion-list>
    </form>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button
      [disabled]="generalForm.invalid"
      class="white-button"
      id="general-info-page-next-btn"
      expand="block"
      (click)="applyGeneralInformation()"
    >
      {{ 'signup-module.general-info-page.next-button-text' | translate }}
    </ion-button>
  </ion-toolbar>
</ion-footer>
